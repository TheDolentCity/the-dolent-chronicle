---
import { PageDescription } from "@/components/app/PageDescription";
import { PageHeader } from "@/components/app/PageHeader";
import { PageHomeButton } from "@/components/app/PageHomeButton";
import PageSection from "@/components/app/PageSection.astro";
import { PageTitle } from "@/components/app/PageTitle";
import { PostList } from "@/components/posts/Posts";
import { ThemeSelect } from "@/components/themes/ThemeSelect";
import { SITE_DESCRIPTION, SITE_TITLE } from "@/constants";
import BaseLayout from "@/layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

// Get sorted posts
const posts = (await getCollection("posts")).sort((a, b) => b.data.published.valueOf() - a.data.published.valueOf());
---

<BaseLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<PageSection>
		<PageHeader>
			<PageHomeButton />
			<PageTitle>
				{SITE_TITLE}
			</PageTitle>
			<ThemeSelect client:only="react" className="not-md:hidden" />
		</PageHeader>
		<PageDescription>
			{SITE_DESCRIPTION}
		</PageDescription>
		<hr />
		<PostList posts={posts} />
	</PageSection>
</BaseLayout>
